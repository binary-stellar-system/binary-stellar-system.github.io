(()=>{"use strict";const e=window.navigator,t=e.userAgent.replace(/\(|\)/g,"").split(" ").filter((e=>{const t=e.toLowerCase();return t.indexOf("/")>-1&&!t.startsWith("gecko")&&!t.startsWith("safari")&&!t.startsWith("applewebkit")&&!t.startsWith("mozilla")})),o=t[t.length-1],n=parseFloat(o.split("/")[1]),i=o.split("/")[0],r="version"===i.toLowerCase()?"Safari":i,s={capabilitiesDetected:!1,hasJscript:!1,hasActiveX:!1,isDOMCapable:!1,isAJAXCapable:!1,hasCookiesEnabled:e.cookieEnabled,name:r,uaName:r,OS:e.platform,uaOS:e.platform,userAgent:e.userAgent,appVersion:n,uaAppVersion:n,version:n,uaOSVersion:"",onLoadEventStack:[],onDOMReadyEventStack:[],touchEnabled:!1,includeStack:[],scriptLoadStack:[],scriptLocation:""},a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(window.attachEvent&&!window.addEventListener){const n=e.attachEvent("on"+t,o);if(!n)throw"Event "+t+" could not be added!";return n}return e.addEventListener(t,o,n)},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(window.detachEvent&&!window.removeEventListener){const n=e.detachEvent("on"+t,o);if(!n)throw"Event "+t+" could not be removed!";return n}return e.removeEventListener(t,o,n)},c=e=>window.event?window.event:e,d=e=>{const t=c(e);let o;return t.srcElement?o=t.srcElement:t.target&&(o=t.target),o},u=e=>{const t=c(e);let o=0;return t.pageX?o=t.pageX:t.clientX&&(o=t.clientX),o},h=e=>{const t=c(e);let o=0;return t.pageY?o=t.pageY:t.clientY&&(o=t.clientY),o};let g,f;document.createEvent&&(g=(e,t,o)=>{let n=document.createEvent("Event");if(n)return o||(o={}),o.canBubble||(o.canBubble=!0),o.cancellable||(o.cancellable=!0),n.initEvent("Event",o.canBubble,o.cancellable),n},f=function(e){document.dispatchEvent(e)});function w(e,t,o){return o instanceof e||(typeof o).toLowerCase()===t}function m(e){return w(String,"string",e)}function p(e){return w(Object,"object",e)}function v(e){let t=e.nodeName;return t=t||"","textarea"===t.toLowerCase()}function b(e){let t=typeof e,o=e.nodeName;return o=o||"","input"===o.toLowerCase()||"input"===t.toLowerCase()&&void 0!==t.type}a(window,"load",(function(){let e,t,o=s.onLoadEventStack;e=o.length;for(let n=0;n<e;n+=1)t=o[n],t&&"function"===(typeof t).toLowerCase()&&t()}),!1);const A=/^#(?:([\w-]+)|(\w+)|\.([\w-]+))$/;function M(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;if(!m(e)&&p(e)&&e.hasOwnProperty("objectName")&&"selector"===e.objectName)return e;let o,n=e;e instanceof HTMLElement&&(e.id?n="#"+e.id:(n=e.nodeName.toLowerCase(),e.className.length>0&&(n+="."+e.className.split(" ").join(" .")))),A.test(n)?(o=t.querySelector(n),o=o?[o]:[]):(o=t.querySelectorAll(n),o=o&&o.length>0?o:[]);const i={length:o.length,objectName:"selector",get:function(e){return o[e]},toArray:function(){return Array.from(o)},each:function(e){i.toArray().forEach(e)}};for(let e=0;e<i.length;e++)i[e]=o[e];return i}const T=function(e,t){-1===e?.className?.indexOf(t)&&(e.className+=" "+t)},y=function(e,t,o){let n,i=document.body;if(t&&m(t)?i=document.getElementById(t):t&&(i=t),!e)return i;if(o&&o.id&&(n=document.getElementById(o.id)),n||(n=document.createElement(e)),!n)return n;if(i.appendChild(n),n&&o){let e;for(e in o)try{n[e]=o[e]}catch(e){}o.className&&T(n,o.className)}return n},x=function(e,t,o){let n,i,r=M(e);if(!(r.length<=0)&&(o||(o=0),!(o>=r.length)&&r[o]))return n=r.get(o),i=new String(n.tagName).toLowerCase(),(t||""===t)&&function(e,t){m(e)||w(Number,"number",e)?b(i)||b(t)||v(t)?t.value=e:t.innerHTML=e:t&&p(e)&&t.appendChild(e)}(t,n),b(i)||b(n)||v(n)?n.value:m(n.innerHTML)?n.innerHTML:void 0},C=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).getElementById(e)},S=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).querySelectorAll(e)};function P(){const e=this,t=(t,o)=>{let n,i,r=e;return n=c(t),i=d(n),r.moving&&r.dragableCoverMask.id===i.id&&(r.posX=u(),r.posY=h(),r[o].style.left=r.posX-r.offsetX+"px",r[o].style.top=r.posY-r.offsetY+"px"),r},o=()=>{let e;window.getSelection?(e=window.getSelection(),e&&e.empty?e.empty():e&&e.removeAllRanges&&e.removeAllRanges()):document.selection&&document.selection.clear?document.selection.clear():document.selection&&document.selection.empty&&document.selection.empty()},n=(t,o,n)=>{const i=C(o),r=C(n||o);i&&r&&(t?(e.dragableObjects[r.id]=i,a(r,"mousedown",e.mousedown,!1)):(e.dragableObjects[r.id]=null,l(r,"mousedown",e.mousedown,!1)))};return this.dragableObjects=[],this.initialize=()=>{const t=e;t.isInitialized||(t.dragableCoverMask=C("-dragndrop-enabled-x"),t.dragableCoverMask||(t.dragableCoverMask=y("div",document.body),t.dragableCoverMask.id="-dragndrop-enabled-x"),t.dragableCoverMask.style.display="none",a(document,"mousemove",t.mousemove,!1),a(document,"mouseup",t.mouseup,!1),t.isInitialized=!0)},this.findDragableParent=t=>{const o=e;if(t&&t.nodeName&&"body"!==t.nodeName.toLowerCase())return o.dragableObjects[t.id]?t:o.findDragableParent(t.parentNode)},this.mousemove=e=>(t(e,"dragableCoverMask"),o(),!1),this.mouseup=e=>{const n=t(e,"currentDragObject");n.dragableCoverMask.style.display="none",n.currentDragObject=null,n.moving=!1,o()},this.mousedown=function(t){const o=e,n=c(t);let i=d(n);if(i=o.findDragableParent(i),!o.dragableObjects[i.id])return o.moving=!1,!1;o.currentDragObject=o.dragableObjects[i.id],document.body.appendChild(o.currentDragObject),o.posX=u(),o.posY=h(),o.offsetX=o.posX-o.currentDragObject.offsetLeft,o.offsetY=o.posY-o.currentDragObject.offsetTop;let r=o.dragableCoverMask;return r.style.position="absolute",r.style.display="block",r.style.border="2px solid black",r.style.left=o.currentDragObject.offsetLeft+"px",r.style.top=o.currentDragObject.offsetTop+"px",r.style.width=o.currentDragObject.offsetWidth+"px",r.style.height=o.currentDragObject.offsetHeight+"px",r.style.zIndex=1e5,o.moving=!0,!1},this.setDragable=function(e,t){n(!0,e,t)},this.setNONDragable=function(e,t){n(!1,e,t)},this}function D(e,t,o,n,i,r){const s=C(r);s?(this.mainWindow=s,this.titleBar=S(".WebWindowTitle",this.mainWindow)[0],this.titleBar.id="WebWindowTitle"+r,this.windowArea=S(".WebWindowArea",this.mainWindow)[0],this.windowArea.id="WebWindowArea"+r,this.footerArea=S(".WebWindowFooter",this.mainWindow)[0],this.footerArea.id="WebWindowFooter"+r):(this.mainWindow=y("div",document.body,{className:"WebWindowMain",id:r}),this.mainWindow.style.left=t+"px",this.mainWindow.style.top=o+"px",this.mainWindow.style.width=n+"px",this.mainWindow.style.height=i+"px",this.titleBar=y("div",this.mainWindow,{className:"WebWindowTitle",id:"WebWindowTitle"+r}),this.windowArea=y("div",this.mainWindow,{className:"WebWindowArea",id:"WebWindowArea"+r}),this.footerArea=y("div",this.mainWindow,{className:"WebWindowFooter",id:"WebWindowFooter"+r}));y("span",this.titleBar,{className:"WebWindowTitleText"}).innerHTML=e;let a={className:"WebWindowButtonBox"};const l=y("span",this.titleBar,a);a={name:"WW"+r,onsubmit:"return false;"};const c=y("form",l,a);this.maximize=function(){return!1},this.minimize=function(){return!1},this.destroy=function(){return!1};const d=(e,t,o,n,i)=>{const r=y("button",e,{className:"WebWindowButton",name:o,id:o+t});r.innerHTML=n,r.onclick=i;let s=e.innerHTML;s=s.toLowerCase();const a=new RegExp("button class");for(;s.match(a);)s=s.replace(a,'button type="button" class')};d(c,r,"rollup","-",this.minimize),d(c,r,"rolldown","o",this.maximize),d(c,r,"destroy","X",this.destroy),this.windowArea.style.width=n+"px",this.titleBar.style.width=n+"px",this.footerArea.style.width=n+"px";const u=i-this.titleBar.offsetHeight-this.footerArea.offsetHeight;this.windowArea.style.height=u+"px",this.dragndrop=new P}function R(){return Array.from(arguments).reduce(((e,t)=>+e+ +t),0)}function k(e,t){return+e-+t}function H(){return Array.from(arguments).reduce(((e,t)=>+e*+t),1)}function N(e,t){return+e/+t}function W(e){return Math.pow(e,2)}D.prototype.popToFront=function(e){const t=c(e);!function(e,t,o){let n,i,r,s;if(i=M(e),!(i.length<=0)&&(n=i.get(0),o&&o<i.length&&(n=i.get(o)),n))r=function(e,t){let o;e?(o=e.parentNode,o&&(o.nodeName.toLowerCase()!==t?r(o,t):s=o)):s=null},r(n,t)}(d(t),"div.WebWindowMain")},D.prototype.enableDrag=function(){const e=this.popToFront;this.dragndrop.initialize(),this.dragndrop.setDragable(this.mainWindow.id,this.titleBar.id),a(this.mainWindow,"mousedown",e,!1)},D.prototype.disableDrag=function(){const e=this.popToFront;this.dragndrop.initialize(),this.dragndrop.setNONDragable(this.mainWindow.id,this.titleBar.id),l(this.mainWindow,"mousedown",e,!1)},D.prototype.setTitle=function(e){const t=this.titleBar.getElementsByTagName("span");t&&t.length>0&&(t[0].innerHTML=e)},D.prototype.setContent=function(e){x(this.windowArea,e)};function E(e,t,o){const n=B(o),i=H(e,Math.sin(n)),r=H(t,Math.cos(n));return{x:Math.round(i),y:Math.round(r)}}function L(e,t){const o=[];for(let n=0;n<=360;n++){const i=E(e,t,n);o.push(i)}return o}function I(e,t){const o=B(t),n=H(e,Math.sin(o)),i=H(e,Math.cos(o));return{x:Math.round(n),y:Math.round(i)}}function F(e){const t=[];for(let o=0;o<=360;o++){const n=I(e,o);t.push(n)}return t}function B(e){return e*Math.PI/180}function O(e,t,o,n){const i={canvas:null,ctx:null,width:0,height:0};let r;return i.canvas=y("canvas",t,{id:e}),i.canvas?(o&&(i.canvas.width=o),n&&(i.canvas.height=n),i.width=i.canvas.width,i.height=i.canvas.height,null!=i.canvas.getContext&&(i.ctx=i.canvas.getContext("2d"),function(e){const t="black";function o(e,t){return Math.sqrt(W(e)-W(t))}e.clear=function(){this.ctx.clearRect(0,0,this.width,this.height)},e.line=function(e,o,n,i,r){let s,a,l,c,d,u=0,h=0;s=this.ctx,r&&(c=r.color,d=r.rotateAngle),s.save(),s.beginPath(),d&&(a=Math.abs(e-n)/2,l=Math.abs(o-i)/2,u=e+a,h=o+l,s.translate(u,h),s.rotate(B(d))),s.moveTo(e-u,o-h),s.lineTo(n-u,i-h),s.fillStyle=c||t,s.fill(),s.strokeStyle=c||t,s.stroke(),s.restore()},e.circle=function(e,o,n,i){let r,s,a,l;s=this.ctx,i&&(a=i.color,l=i.fillStrokeClear),s.beginPath(),s.moveTo(e+n,o),s.arc(e,o,n,0,2*Math.PI,!0),r=l||"stroke",s[r+"Style"]=a||t,s[r]()},e.halfCircle=function(e,o,n,i){let r,s,a,l,c,d,u=0,h=0;s=this.ctx,i&&(a=i.color,l=i.rotateAngle,d=i.openTop,c=i.fillStrokeClear),s.save(),s.beginPath(),l&&(u=e,h=o,s.translate(u,h),s.rotate(B(l))),s.moveTo(e-n-u,o-h),s.arc(e-u,o-h,n,Math.PI,2*Math.PI,!0),d||s.lineTo(e-n-u,o-h),s.closePath(),r=c||"stroke",s[r+"Style"]=a||t,s[r](),s.restore()},e.oval=function(e,o,n,i,r){let s,a,l,c,d,u=0,h=0,g=.5522848,f=e-n/2,w=o-i/2,m=n/2*g,p=i/2*g,v=f+n,b=w+i,A=f+n/2,M=w+i/2;a=this.ctx,a.save(),r&&(l=r.color,c=r.fillStrokeClear,d=r.rotateAngle),a.beginPath(),d&&(u=A,h=M,a.translate(u,h),a.rotate(B(d))),a.moveTo(f-u,M-h),a.bezierCurveTo(f-u,M-p-h,A-m-u,w-h,A-u,w-h),a.bezierCurveTo(A+m-u,w-h,v-u,M-p-h,v-u,M-h),a.bezierCurveTo(v-u,M+p-h,A+m-u,b-h,A-u,b-h),a.bezierCurveTo(A-m-u,b-h,f-u,M+p-h,f-u,M-h),a.restore(),s=c||"stroke",a[s+"Style"]=l||t,a[s]()},e.rectangle=function(e,o,n,i,r){let s,a,l,c,d,u=0,h=0;a=this.ctx,r&&(l=r.color,c=r.rotateAngle,d=r.fillStrokeClear),a.save(),a.beginPath(),c&&(u=Math.round(e+n/2),h=Math.round(o+i/2),a.translate(u,h),a.rotate(B(c))),s=d||"stroke",a[s+"Style"]=l||t,a[s+"Rect"](e-u,o-h,n,i),a[s](),a.restore()},e.square=function(e,t,o,n){this.rectangle(e,t,o,o,n)},e.triangle=function(e,o,n,i,r,s,a){let l,c,d,u,h,g=0,f=0;l=this.ctx,a&&(d=a.color,u=a.rotateAngle,h=a.fillStrokeClear),l.save(),l.beginPath(),u&&(g=(e+n+r)/3,f=(o+i+s)/3,l.translate(g,f),l.rotate(B(u))),c=h||"stroke",l.moveTo(e-g,o-f),l.lineTo(n-g,i-f),l.lineTo(r-g,s-f),l.lineTo(e-g,o-f),l.closePath(),l[c+"Style"]=d||t,l[c](),l.restore()},e.equilateralTriangle=function(e,t,n,i){let r,s,a;i&&(a=i.orientation),s=n/2,r=o(n,s),"down"===a?this.triangle(e,t,e+n,t,e+s,t+r,i):this.triangle(e,t,e+n,t,e+s,t-r,i)},e.hexagon=function(e,n,i,r){let s,a,l,c,d,u,h,g=0,f=0;s=this.ctx,r&&(u=r.color,h=r.rotateAngle,d=r.fillStrokeClear),l=i/2,c=d||"stroke",a=o(i,l),s.save(),s.beginPath(),h&&(g=e,f=n,s.translate(g,f),s.rotate(B(h))),s.moveTo(e+l-i-g,n-a-f),s.lineTo(e+l-g,n-a-f),s.lineTo(e+i-g,n-f),s.lineTo(e+l-g,n+a-f),s.lineTo(e+l-i-g,n+a-f),s.lineTo(e-i-g,n-f),s.lineTo(e-i+l-g,n-a-f),s.closePath(),s[c+"Style"]=u||t,s[c](),s.restore()},e.octagon=function(e,o,n,i){let r,s,a,l,c,d,u,h=0,g=0;i&&(d=i.color,u=i.rotateAngle,c=i.fillStrokeClear),l=c||"stroke",a=n/2,s=Math.sqrt(Math.pow(n,2)+Math.pow(a,2)),r=this.ctx,r.save(),u&&(h=e,g=o,r.translate(h,g),r.rotate(B(u))),r.beginPath(),r.moveTo(e-a-h,o-s-g),r.lineTo(e+a-h,o-s-g),r.lineTo(e+s-h,o-a-g),r.lineTo(e+s-h,o+a-g),r.lineTo(e+a-h,o+s-g),r.lineTo(e-a-h,o+s-g),r.lineTo(e-s-h,o+a-g),r.lineTo(e-s-h,o-a-g),r.lineTo(e-a-h,o-s-g),r.closePath(),r[l+"Style"]=d||t,r[l](),r.restore()},e.setBackgroundColor=function(e){this.rectangle(0,0,this.width,this.height,{color:e||"white",fillStrokeClear:"fill"})},e.addtext=function(e,o,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.ctx.font=i.font||"16pt Calibri",this.ctx.fillStyle=i.color||t,this.ctx.fillText(n,e,o)}}(i),r=i),r):null}const $=new class AstronomyMathUtilities{pad(e){return`${e}`.padStart(2,"0")}raDegreesToHourMinutesSeconds(e){const t=N(e<0?R(e,360):e,15),o=Math.floor(t)%24,n=H(this.getFraction(t),60);return{hours:o,minutes:Math.floor(n),seconds:+Number(H(this.getFraction(n),60)).toFixed(2)}}decDegreesToHourMinutesSeconds(e){const t=e,o=+`${t}`.split(".")[0]%90,n=H(this.getFraction(t),60);return{hours:o,minutes:Math.floor(n),seconds:+Number(H(this.getFraction(n),60)).toFixed(2)}}hoursMinutesSeconds(e){const t=Math.floor(e)%360,o=H(60,this.getFraction(e));let n=Math.floor(o),i=Math.round(H(60,k(o,n)));return i>=60&&(i=0,n++),n>=60&&(n=0,t++),`${t}:${this.pad(n)}:${this.pad(i)}`}hoursMinutesSecondsTo24(e){let t=Math.floor(e);t=t<0?R(24,t):t,t=t>24?t%24:t;const o=H(60,this.getFraction(e));let n=Math.floor(o),i=Math.round(H(60,k(o,n)));return i>=60&&(i=0,n++),n>=60&&(n=0,t++),t>=24&&(t%=24),`${t}:${this.pad(n)}:${this.pad(i)}`}degreeHHMMSSToDegrees(e,t,o){return Number(R(e,N(t,60),N(o,3600))).toFixed(6)}mapTo24Hour(e){let t=e;return t<0?t=k(24,Math.abs(t))%24:t>=24&&(t%=24),t}getFraction(e){const t=k(Math.abs(e),Math.abs(Math.floor(e)));return t<0?R(t,1):t}},j=Date.UTC(2e3,0,1,12,0,0,0),z=2451545,U=365.25;const Y=new class AstronomyDateUtilities{toUTC(e){return{year:e.getUTCFullYear(),month:e.getUTCMonth(),date:e.getUTCDate(),hours:e.getUTCHours(),minutes:e.getUTCMinutes(),seconds:e.getUTCSeconds(),milliseconds:e.getUTCMilliseconds()}}toJulian(e){const{year:t,month:o,date:n,hours:i,minutes:r,seconds:s}=e;let a=R(o,1),l=t,c=R(i,N(r,60),N(s,3600));a<=2&&(a=R(a,12),l=k(l,1));Math.floor(N(l,100));const d=Math.floor(H(U,R(l,4716))),u=Math.floor(H(30.6001,R(a,1))),h=R(k(k(R(d,u,n),13),1524.5),N(c,24));return Number(h).toFixed(12)}toJulianLT(e){const t=N(k(e.getTime(),j),864e5),o=R(z,t);return Number(o).toFixed(12)}toGMST(e){const t=k(e,z),o=N(t,H(U,100)),n=H(Math.pow(o,2),387933e-9),i=N(Math.pow(o,3),3871e4),r=k(R(280.46061837,H(t,360.98564736629),n),i)%360;return r<0?Number(R(r,360)).toFixed(12):Number(r).toFixed(12)}gmstToLST(e,t){const o=t<0?R(360,t):t,n=R(e,o)%360;return Number(n).toFixed(12)}lstDecimalToLstDecimalHours(e){return N(e/15)}isDST(e){const t=new Date(e.getFullYear(),0,1).getTimezoneOffset(),o=new Date(e.getFullYear(),6,1).getTimezoneOffset();return Math.max(t,o)!==e.getTimezoneOffset()}utcToLST(e,t){const o=this.toJulian(e),n=this.toGMST(o);return this.gmstToLST(n,t)}calculateLST(e,t){const o=this.toUTC(e),n=this.utcToLST(o,t);return Number(n%24).toFixed(12)}},X=3.1208056,q=89.37425,J=21.0786056,V=-77.4311111;const G=new class PolarScopeCalculator{calculateHourAngle(e,t,o){const n=new Date;n.setFullYear(e.getFullYear()),n.setMonth(e.getMonth()),n.setDate(e.getDate()),n.setHours(e.getHours()),n.setMinutes(e.getMinutes()),n.setSeconds(e.getSeconds()),n.setMilliseconds(0);const i=new Date(n.getTime()),r=n.getTimezoneOffset()/60,s=Y.toUTC(i),a=Y.toJulian(s),l=Y.toGMST(a),c=k(N(Y.gmstToLST(l,o),15),t),d=k(r,c);if(d<0){return{correctHourAngle:k(24,R(d,24)),hourAngle:c}}return{correctHourAngle:d,hourAngle:c}}precessionCorrection(e,t){const o=Y.toJulian(e),n=t<0?J:X,i=t<0?V:q;let r=N(H(n,Math.PI),12),s=N(H(i,Math.PI),180);if(t<0)this.correctedRA=R(n,N(H(R(3.075,H(1.336,Math.sin(H(15,n)),57.08839)),k(e.year,2e3)),3600)),this.correctedDEC=R(i,N(H(20.04,Math.cos(H(15,i)),k(e.year,2e3)),3600));else{const e=N(k(o,2451545),36525);let t=R(H(2306.2181,e),H(.30188,e,e),H(.017998,e,e,e)),n=R(H(2306.2181,e),H(1.09468,e,e),H(.018203,e,e,e)),i=R(H(2004.3109,e),H(-.42665,e,e),H(-.041833,e,e,e));t=N(H(t,Math.PI),648e3),n=N(H(n,Math.PI),648e3),i=N(H(i,Math.PI),648e3);const a=H(Math.sin(R(r,t)),Math.cos(s)),l=k(H(Math.cos(R(r,t)),Math.cos(i),Math.cos(s)),H(Math.sin(i),Math.sin(s))),c=R(H(Math.cos(R(r,t)),Math.sin(i),Math.cos(s)),H(Math.cos(i),Math.sin(s))),d=R(Math.sqrt(H(a,a),H(l,l)));this.correctedDEC=c>.9?Math.acos(d):c<-.9?-Math.acos(d):Math.asin(c),this.correctedRA=R(Math.atan2(a,l),n),this.correctedRA=N(H(12,this.correctedRA),Math.PI),this.correctedDEC=N(H(180,this.correctedDEC),Math.PI),this.correctedDEC>90&&(this.correctedDEC=k(180,this.correctedDEC),this.correctedRA=R(this.correctedRA,12)),this.correctedDEC<-90&&(this.correctedDEC=k(-180,this.correctedDEC),this.correctedRA=R(this.correctedRA,12)),this.correctedRA=$.mapTo24Hour(this.correctedRA)}}getPolarisHA(e,t,o){const n=Y.toUTC(e);this.precessionCorrection(n,t);let i=k(Y.utcToLST(n,o),this.correctedRA);return t<0&&(i=i<0?Math.abs(i):-i),{ha:i}}getPolarisHourAngle(e,t,o,n){const i=Y.toUTC(e);this.precessionCorrection(i,t);const r=Y.calculateLST(e,o);let s=Number(k(r,n)).toFixed(6),a=Number(k(r,this.correctedRA)).toFixed(6);s<0&&(s=R(24,s)),a<0&&(a=R(24,a));const{correctHourAngle:l,hourAngle:c}=this.calculateHourAngle(e,n,o);return{hourAnglePolaris:s,plusHourAnglePolaris:a,correctHourAngle:l,hourAngle:c}}haToDegrees(e){return N(H(360,e),24)}};class CelestialBody{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.color=e.color||"red",this.radius=e.radius||5,this.hiddenRadius=R(this.radius,1),this.direction=e.direction&&"clockwise"===e.direction?R:k,this.angle=e.startAngle||0,this.speed=e.speed||1}setupPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,t=arguments.length>1?arguments[1]:void 0;this.points=e!==t&&t?L(e,t):F(e)}increment(){this.angle=this.direction(this.angle,this.speed),this.angle<0?this.angle=360:this.angle>360&&(this.angle=0)}getCurrentPosition(e,t){return{x:this.direction(e.x,this.points[this.angle].x),y:this.direction(e.y,this.points[this.angle].y),radius:t?this.radius:this.hiddenRadius,color:t?this.color:"black"}}getHiddenPosition(e){return this.getCurrentPosition(e,!1)}getVisablePosition(e){return this.getCurrentPosition(e,!0)}}class Star extends CelestialBody{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),e.xRadius&&this.setupPoints(e.xRadius,e.yRadius),e.isFixedCenter&&e.centerPoints&&(this.centerPts=e.centerPoints)}getInitialPosition(e){const t=this.centerPts?this.centerPts:e;return this.getVisablePosition(t)}getNextPosition(e){const t=this.centerPts?this.centerPts:e;return this.hidden=this.getHiddenPosition(t),this.increment(),this.visable=this.getVisablePosition(t),{hidden:this.hidden,visable:this.visable}}getPoint(){return{hidden:{x:this.hidden.x,y:this.hidden.y},visable:{x:this.visable.x,y:this.visable.y}}}}const K=(e,t,o,n)=>{const{hourAnglePolaris:i,plusHourAnglePolaris:r,correctHourAngle:s,hourAngle:a}=G.getPolarisHourAngle(e,t,o,n);return{hourAnglePolaris:Math.floor(H(i,15)),plusHourAnglePolaris:Math.floor(H(r,15)),correctHourAngle:s,hourAngle:a}};class PolarScope extends Star{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),this.speed=0,this.latitude=e.latitude,this.longitude=e.longitude,this.rightAssention=e.rightAssention,this.useInputRA=e.useInputRA,this.clockTime=e.clockTime||new Date;const{hourAnglePolaris:t,plusHourAnglePolaris:o,correctHourAngle:n,hourAngle:i}=K(this.clockTime,this.latitude,this.longitude,this.rightAssention);this.hourAngle=o,this.userDefinedHourAngle=t,this.correctHourAngle=n,this.hourAngleAlt=i,this.angle=this.useInputRA?this.userDefinedHourAngle:this.hourAngle,this.direction=R}setupPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;this.points=F(e)}increment(){this.clockTime=new Date;const{hourAnglePolaris:e,plusHourAnglePolaris:t,correctHourAngle:o,hourAngle:n}=K(this.clockTime,this.latitude,this.longitude,this.rightAssention);this.hourAngle=t,this.userDefinedHourAngle=e,this.correctHourAngle=o,this.hourAngleAlt=n,this.angle=this.useInputRA?this.userDefinedHourAngle:this.hourAngle,this.angle<0?this.angle=360:this.angle>360&&(this.angle=0)}}let Q,Z,_;const ee=300,te=300,oe=300,ne=680,ie=300,re=1e3;function se(e,t,o){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:["12/6","0/0","18/9","6/3"];window.canvasRef.circle(e,t,o,{color:"red"}),window.canvasRef.line(e,t-o,e,t+o,{color:"red"}),window.canvasRef.line(e-o,t,e+o,t,{color:"red"});for(let n=0;n<360;n+=15)window.canvasRef.line(e-o,t,e+o,t,{rotateAngle:n,color:"red"});window.canvasRef.circle(e,t,o-20,{color:"black",fillStrokeClear:"fill"}),window.canvasRef.line(e,t-o,e,t+o,{color:"red"}),window.canvasRef.line(e-o,t,e+o,t,{color:"red"});const i=10*n[0].length/2,r=10*n[1].length/2,s=10*n[2].length+5;window.canvasRef.addtext(e-i,t-o-10,n[0],{color:"red"}),window.canvasRef.addtext(e-r,t+o+20,n[1],{color:"red"}),window.canvasRef.addtext(e-o-s,t,n[2],{color:"red"}),window.canvasRef.addtext(e+o+10,t,n[3],{color:"red"})}function ae(){const{latitude:e,longitude:t,rightAssentionDefault:o,raHours:n,raMinutes:i,raSeconds:r,declination:s,rightAssention:a}=function(){const e=document.getElementById("latitude").value||37.6904826,t=document.getElementById("longitude").value||-122.47267,o=document.getElementById("polarisRAHour").value,n=document.getElementById("polarisRAMinute").value,i=document.getElementById("polarisRASecond").value,r=document.getElementById("polarisDecHour").value,s=document.getElementById("polarisDecMinute").value,a=document.getElementById("polarisDecSecond").value,l="3:07:14.9".split(":"),c="89:22:27.3".split(":"),d=o&&!isNaN(parseInt(o))?o:l[0],u=n&&!isNaN(parseInt(n))?n:l[1],h=i&&!isNaN(parseInt(i))?i:l[2],g=r&&!isNaN(parseInt(r))?r:c[0],f=s&&!isNaN(parseInt(s))?s:c[1],w=a&&!isNaN(parseInt(a))?a:c[2];return{latitude:e,longitude:t,rightAssentionDefault:l,raHours:d,raMinutes:u,raSeconds:h,decHours:g,decMinutes:f,decSeconds:w,declination:$.degreeHHMMSSToDegrees(g,f,w),rightAssention:$.degreeHHMMSSToDegrees(d,u,h)}}(),l=+n==+o[0]&&+i==+o[1]&&+r==+o[2];window.canvasRef.rectangle(0,0,600,1200,{color:"black",fillStrokeClear:"fill"}),window.canvasRef.addtext(0,te-160,"Polaris Clock",{color:"red"}),se(ee,te,150,["0/24","12","6","18"]),window.canvasRef.addtext(0,ne-160,"KStars 24h Polaris Clock",{color:"red"}),se(oe,ne,150,["12","0/24","18","6"]),window.canvasRef.addtext(0,re-90,"KStars 12h Polaris Clock",{color:"red"}),se(ie,re,100,["0/12","6","9","3"]);const c=new Date;let d=0,u=0,h=0;const g={x:ie,y:re},f={x:oe,y:ne},w={x:ee,y:te};_||(_=new PolarScope({color:"#fff",radius:6,isFixedCenter:!0,clockTime:c,centerPoints:w,xRadius:115,yRadius:115,startAngle:0,latitude:e,longitude:t,rightAssention:a})),Q||(Q=new PolarScope({color:"#fff",radius:6,isFixedCenter:!0,clockTime:c,centerPoints:g,xRadius:70,yRadius:70,startAngle:0,latitude:e,longitude:t,rightAssention:a})),Z||(Z=new PolarScope({color:"#fff",radius:6,isFixedCenter:!0,clockTime:c,centerPoints:f,xRadius:115,yRadius:115,startAngle:0,latitude:e,longitude:t,rightAssention:a})),_&&(_.latitude=e,_.longitude=t,_.rightAssention=a,h=_.getNextPosition(w).visable,window.canvasRef.circle(h.x,h.y,h.radius,{color:h.color,fillStrokeClear:"fill"}),window.polarisClockref=_),Q&&(Q.latitude=e,Q.longitude=t,Q.rightAssention=a,d=Q.getNextPosition(g).visable,window.canvasRef.circle(d.x,d.y,d.radius,{color:d.color,fillStrokeClear:"fill"}),window.polarSPref=Q),Z&&(Z.latitude=e,Z.longitude=t,Z.rightAssention=a,u=Z.getNextPosition(f).visable,window.canvasRef.circle(u.x,u.y,u.radius,{color:u.color,fillStrokeClear:"fill"}),window.polarSP24Href=Z);const m=Z?Z.userDefinedHourAngle:0,p=Z?Z.hourAngle:0,v=$.hoursMinutesSeconds(m),b=$.hoursMinutesSeconds(p),{ha:A}=G.getPolarisHA(c,e,t,t),M=$.hoursMinutesSeconds(A),T=e=>Number(e).toFixed(6);l?(window.canvasRef.addtext(50,20,`Using corrected RA, Dec values: ${$.hoursMinutesSeconds(G.correctedRA)} / ${$.hoursMinutesSeconds(G.correctedDEC)}`,{color:"red"}),window.canvasRef.addtext(50,40,`Polaris hour angle: ${T(p)} alt calculation: ${T(A)} `,{color:"red"}),window.canvasRef.addtext(50,60,`Clock time: ${b} or ${M} `,{color:"red"})):(window.canvasRef.addtext(50,20,`Using User Defined RA, Dec: ${$.hoursMinutesSeconds(a)} / ${$.hoursMinutesSeconds(s)}`,{color:"red"}),window.canvasRef.addtext(50,40,`Polaris hour angle: ${T(p)} alt calculation: ${T(A)} `,{color:"red"}),window.canvasRef.addtext(50,60,`Clock time: ${v} ${M} `,{color:"red"})),window.canvasRef.addtext(50,80,`Degrees: ${Q.angle}  ${Z.angle}`,{color:"red"})}var le;le=function(){const e=document.getElementById("main-window"),t=window.getComputedStyle(e),o=(new D("Polaris Hour Angle",t.offsetLeft,t.offsetTop,t.offsetWidth,t.offsetHeight,"main-window"),O("polaris-hour","canvas-container",600,1200));window.canvasRef=o,ae(),window.setInterval(ae,5e3)},s.onLoadEventStack.push(le)})();